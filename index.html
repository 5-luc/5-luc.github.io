<!DOCTYPE html>
<html lang="zh">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme-color" content=#ff00ff>
  <title>牛牛和小栗</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="小犹太的牛牛">
  <meta name="keywords" content="">
  <meta name="description" content="我们一直快乐幸福">
  <script id="hexo-configurations">
  var CONFIG = {
    root: '/',
    theme: 'lx',
    version: '0.3.9',
    localsearch:{
      "enable": true,
      "trigger": "auto",
      "top_n_per_article": 1,
      "unescape": false,
      "preload": false
      },
    path: 'search.xml'
  };
</script>

  <link rel="shortcut icon" href="/logo.jpg">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/css/main.min.css">
  <style type="text/css">
    pre,
    code {
      font-family: 'Fira Code', monospace;
    }
    html {
      font-family: sans-serif;
    }
    body {
      font-family: sans-serif;
    }
    h1, h2, h3, h4, h5, figure {
      font-family: sans-serif;
    }
    .menu-container{
      font-family: sans-serif;
    }
  </style>

  <script src="//cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/js/jquery.jside.menu.js"></script>
	<script>
	$(document).ready(function(){
	$(".menu-container").jSideMenu({
	    jSidePosition: "position-right",
	    jSideSticky: true,
	    jSideSkin: "pink",
	     });
	}); 
	</script>
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Fira Code:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css">
<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/rss2.xml" title="牛牛和小栗" type="application/rss+xml">
</head>
<body>
<div id="page">
<a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i></a>
<div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Search..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>

<div id="lx-aside" style="background-image: url(/images/123.jpeg)">
  <div class="overlay">
  <div class="featured">
    <div class="avatar"><a href="/"><img src="/images/avatar.jpg"></a></div>
    <span>小犹太的牛牛</span>
    <h1>牛牛和小栗</h1>
    <span>——牛牛和栗子的主页</span>
    <div class="social-links">
    <a href="function link() { [native code] }" target="_blank"><i class="fa fa- fa-fw"></i></a>
    <a href="function link() { [native code] }" target="_blank"><i class="fa fa- fa-fw"></i></a>
</div>
  </div>
  </div>
</div>

<div id="lx-main-content">
  <div class="lx-post">

  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2022/02/25/engine/">engine</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2022-02-25</span>
      <p><h3 id="www-baidu-com"><a href="#www-baidu-com" class="headerlink" title="www.baidu.com"></a><a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a></h3><hr>
</p>
      <div class="post-button"><a class="btn" href="/2022/02/25/engine/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>阅读更多</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2022/02/06/page%E2%80%9C%E5%BC%80%E5%A7%8B%E5%95%A6%E2%80%9D/">“开始啦”</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2022-02-06 | <i class="fa fa-folder-o"></i> <a class="category-link" href="/categories/%E7%88%B1%E6%83%85%E8%AE%B0%E5%BD%95/">爱情记录</a></span>
      <p><hr>
<h2 id="你好，杨丽"><a href="#你好，杨丽" class="headerlink" title=" 你好，杨丽"></a> 你好，杨丽</h2><h3 id="欢迎来到我的blog！"><a href="#欢迎来到我的blog！" class="headerlink" title="欢迎来到我的blog！"></a>欢迎来到我的blog！</h3><h3 id="这里是我们爱情记录的开始！"><a href="#这里是我们爱情记录的开始！" class="headerlink" title="这里是我们爱情记录的开始！"></a>这里是我们爱情记录的开始！</h3><h3 id="我们会一直在一起的！！"><a href="#我们会一直在一起的！！" class="headerlink" title="我们会一直在一起的！！"></a>我们会一直在一起的！！</h3><p><img src="https://i01piccdn.sogoucdn.com/10528652845d21ef"></p>
</p>
      <div class="post-button"><a class="btn" href="/2022/02/06/page%E2%80%9C%E5%BC%80%E5%A7%8B%E5%95%A6%E2%80%9D/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>阅读更多</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2021/05/23/%E7%88%AC%E8%99%AB%E5%88%9D%E5%A7%8B%E7%84%A6/">爬虫初始焦</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2021-05-23 | <i class="fa fa-folder-o"></i> <a class="category-link" href="/categories/python%E7%88%AC%E8%99%AB/">python爬虫</a></span>
      <p><p>###这篇 Python 爬虫教程主要讲解以下 5 部分内容：</p>
<ul>
<li>了解网页；</li>
<li>使用 requests 库抓取网站数据；</li>
<li>使用 Beautiful Soup 解析网页；</li>
<li>清洗和组织数据；</li>
<li>爬虫攻防战；<h2>
了解网页</h2>
以中国旅游网首页（<a href="http://www.cntour.cn/" target="_blank">http://www.cntour.cn/</a>）为例，抓取中国旅游网首页首条信息（标题和链接），数据以明文的形式出面在源码中。在中国旅游网首页，按快捷键【Ctrl+U】打开源码页面，如图 1 所示。
<div style="text-align: center;">
<br />
<img alt="" src="/uploads/allimg/190117/2-1Z11G63943S6.jpg" /><br />
图 1 中国旅游网首页源码</div>
<h3>
认识网页结构</h3>
网页一般由三部分组成，分别是 HTML（超文本标记语言）、CSS（层叠样式表）和 JScript（活动脚本语言）。<br />
<h4>
HTML</h4>
HTML 是整个网页的结构，相当于整个网站的框架。带&ldquo;＜&rdquo;、&ldquo;＞&rdquo;符号的都是属于 HTML 的标签，并且标签都是成对出现的。<br />
<br />
常见的标签如下：<br />
<p class="info-box">
&lt;html&gt;..&lt;/html&gt; 表示标记中间的元素是网页<br />
&lt;body&gt;..&lt;/body&gt; 表示用户可见的内容<br />
&lt;div&gt;..&lt;/div&gt; 表示框架<br />
&lt;p&gt;..&lt;/p&gt; 表示段落<br />
&lt;li&gt;..&lt;/li&gt;表示列表<br />
&lt;img&gt;..&lt;/img&gt;表示图片<br />
&lt;h1&gt;..&lt;/h1&gt;表示标题<br />
&lt;a href=&quot;&quot;&gt;..&lt;/a&gt;表示超链接</p>
<h4>
CSS</h4>
CSS 表示样式，图 1 中第 13 行＜style type=＂text/css＂＞表示下面引用一个 CSS，在 CSS 中定义了外观。<br />
<h4>
JScript</h4>
JScript 表示功能。交互的内容和各种特效都在 JScript 中，JScript 描述了网站中的各种功能。<br />
<br />
如果用人体来比喻，HTML 是人的骨架，并且定义了人的嘴巴、眼睛、耳朵等要长在哪里。CSS 是人的外观细节，如嘴巴长什么样子，眼睛是双眼皮还是单眼皮，是大眼睛还是小眼睛，皮肤是黑色的还是白色的等。JScript 表示人的技能，例如跳舞、唱歌或者演奏乐器等。<br />
<h3>
写一个简单的 HTML</h3>
通过编写和修改 HTML，可以更好地理解 HTML。首先打开一个记事本，然后输入下面的内容：<br />
<p class="info-box">
&lt;html&gt;<br />
&lt;head&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;title&gt; Python 3 爬虫与数据清洗入门与实战&lt;/title&gt;<br />
&lt;/head&gt;<br />
&lt;body&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;div&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;p&gt;Python 3爬虫与数据清洗入门与实战&lt;/p&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/div&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;div&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;ul&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;li&gt;&lt;a href=&quot;http://c.biancheng.net&quot;&gt;爬虫&lt;/a&gt;&lt;/li&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;li&gt;数据清洗&lt;/li&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/ul&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/div&gt;<br />
&lt;/body&gt;</p>
输入代码后，保存记事本，然后修改文件名和后缀名为&quot;HTML.html&quot;；<br />
<br />
运行该文件后的效果，如图 2 所示。
<div style="text-align: center;">
<br />
<img alt="" src="/uploads/allimg/190117/2-1Z11G64134V2.gif" /><br />
图 2</div>
<br />
这段代码只是用到了 HTML，读者可以自行修改代码中的中文，然后观察其变化。<br />
<h3>
关于爬虫的合法性</h3>
几乎每一个网站都有一个名为 robots.txt 的文档，当然也有部分网站没有设定 robots.txt。对于没有设定 robots.txt 的网站可以通过网络爬虫获取没有口令加密的数据，也就是该网站所有页面数据都可以爬取。如果网站有 robots.txt 文档，就要判断是否有禁止访客获取的数据。<br />
<br />
以淘宝网为例，在浏览器中访问 <a href="https://www.taobao.com/robots.txt" target="_blank">https://www.taobao.com/robots.txt</a>，如图&nbsp; 3 所示。
<div style="text-align: center;">
<br />
<img alt="" src="/uploads/allimg/190117/2-1Z11G6422Ub.gif" /><br />
图 3 淘宝网的robots.txt文件内容</div>
<br />
淘宝网允许部分爬虫访问它的部分路径，而对于没有得到允许的用户，则全部禁止爬取，代码如下：<br />
<p class="info-box">
User-Agent:*<br />
Disallow:/</p>
这一句代码的意思是除前面指定的爬虫外，不允许其他爬虫爬取任何数据。<br />
<h2>
使用 requests 库请求网站</h2>
<h3>
安装 requests 库</h3>
首先在 PyCharm 中安装 requests 库，为此打开 PyCharm，单击&ldquo;File&rdquo;（文件）菜单，选择&ldquo;Setting for New Projects...&rdquo;命令，如图 4 所示。
<div style="text-align: center;">
<br />
<img alt="" src="/uploads/allimg/190117/2-1Z11G64314Q6.jpg" /><br />
图 4</div>
<br />
选择&ldquo;Project Interpreter&rdquo;（项目编译器）命令，确认当前选择的编译器，然后单击右上角的加号，如图 5 所示。
<div style="text-align: center;">
<br />
<img alt="" src="/uploads/allimg/190117/2-1Z11G64341W4.jpg" /><br />
图 5</div>
<br />
在搜索框输入：requests（注意，一定要输入完整，不然容易出错），然后单击左下角的&ldquo;Install Package&rdquo;（安装库）按钮。如图 6 所示：
<div style="text-align: center;">
<br />
<img alt="" src="/uploads/allimg/190117/2-1Z11G64400193.jpg" /><br />
图 6</div>
<br />
安装完成后，会在 Install Package 上显示&ldquo;Package&lsquo;requests&rsquo; installed successfully&rdquo;（库的请求已成功安装），如图 7 所示；如果安装不成功将会显示提示信息。
<div style="text-align: center;">
<br />
<img alt="" src="/uploads/allimg/190117/2-1Z11G644192R.jpg" /><br />
图 7 安装成功</div>
<h3>
爬虫的基本原理</h3>
网页请求的过程分为两个环节：
<ol>
<li>
Request （请求）：每一个展示在用户面前的网页都必须经过这一步，也就是向服务器发送访问请求。</li>
<li>
Response（响应）：服务器在接收到用户的请求后，会验证请求的有效性，然后向用户（客户端）发送响应的内容，客户端接收服务器响应的内容，将内容展示出来，就是我们所熟悉的网页请求，如图 8 所示。</li>
</ol>
<div style="text-align: center;">
<img alt="" src="/uploads/allimg/190117/2-1Z11G6451I08.gif" /><br />
图 8 Response相应</div>
<br />
网页请求的方式也分为两种：
<ol>
<li>
GET：最常见的方式，一般用于获取或者查询资源信息，也是大多数网站使用的方式，响应速度快。</li>
<li>
POST：相比 GET 方式，多了以表单形式上传参数的功能，因此除查询信息外，还可以修改信息。</li>
</ol>
<br />
所以，在写爬虫前要先确定向谁发送请求，用什么方式发送。<br />
<h3>
使用 GET 方式抓取数据</h3>
复制任意一条首页首条新闻的标题，在源码页面按【Ctrl+F】组合键调出搜索框，将标题粘贴在搜索框中，然后按【Enter】键。<br />
<br />
如图 8 所示，标题可以在源码中搜索到，请求对象是www.cntour.cn，请求方式是GET（所有在源码中的数据请求方式都是GET），如图 9 所示。
<div style="text-align: center;">
<br />
<img alt="" src="/uploads/allimg/190117/2-1Z11G64620C9.jpg" /><br />
图 9（<a href="/uploads/allimg/190117/2-1Z11G6464b94.jpg" target="_blank">点此查看高清大图</a>）</div>
确定好请求对象和方式后，在 PyCharm 中输入以下代码：
<pre class="python">
import requests        #导入requests包
url = &#39;http://www.cntour.cn/&#39;
strhtml = requests.get(url)        #Get方式获取网页数据
print(strhtml.text)</pre>
运行结果如图 10 所示：
<div style="text-align: center;">
<img alt="" src="/uploads/allimg/190117/2-1Z11G64I4104.jpg" /><br />
图 10 运行结果效果图（<a href="/uploads/allimg/190117/2-1Z11G64K5445.jpg" target="_blank">点此查看高清大图</a>）</div>
<br />
加载库使用的语句是 import+库的名字。在上述过程中，加载 requests 库的语句是：import requests。<br />
<br />
用 GET 方式获取数据需要调用 requests 库中的 get 方法，使用方法是在 requests 后输入英文点号，如下所示：<br />
<p class="info-box">
requests.get</p>
将获取到的数据存到 strhtml 变量中，代码如下：
<p class="info-box">
strhtml = request.get(url)</p>
这个时候 strhtml 是一个 URL 对象，它代表整个网页，但此时只需要网页中的源码，下面的语句表示网页源码：
<p class="info-box">
strhtml.text</p>
<h3>
使用 POST 方式抓取数据</h3>
首先输入有道翻译的网址：<a href="http://fanyi.youdao.com/" target="_blank">http://fanyi.youdao.com/</a>，进入有道翻译页面。<br />
<br />
按快捷键 F12，进入开发者模式，单击 Network，此时内容为空，如图 11 所示：
<div style="text-align: center;">
<br />
<img alt="" src="/uploads/allimg/190117/2-1Z11G64ZU55.gif" /><br />
图 11</div>
<br />
在有道翻译中输入&ldquo;我爱中国&rdquo;，单击&ldquo;翻译&rdquo;按钮，如图 12 所示：
<div style="text-align: center;">
<br />
<img alt="" src="/uploads/allimg/190117/2-1Z11G6492K96.gif" /><br />
图 12</div>
<br />
在开发者模式中，依次单击&ldquo;Network&rdquo;按钮和&ldquo;XHR&rdquo;按钮，找到翻译数据，如图 13 所示：
<div style="text-align: center;">
<br />
<img alt="" src="/uploads/allimg/190117/2-1Z11G6494Y00.gif" /><br />
图 13</div>
<br />
单击 Headers，发现请求数据的方式为 POST。如图 14 所示：
<div style="text-align: center;">
<br />
<img alt="" src="/uploads/allimg/190117/2-1Z11GA00I57.gif" /><br />
图 14</div>
<br />
找到数据所在之处并且明确请求方式之后，接下来开始撰写爬虫。<br />
<br />
首先，将 Headers 中的 URL 复制出来，并赋值给 url，代码如下：<br />
<p class="info-box">
url = &#39;http://fanyi.youdao.com/translate_o?smartresult=dict&amp;smartresult=rule&#39;</p>
POST 的请求获取数据的方式不同于 GET，POST 请求数据必须构建请求头才可以。<br />
<br />
Form Data 中的请求参数如图 15 所示：
<div style="text-align: center;">
<br />
<img alt="" src="/uploads/allimg/190117/2-1Z11GA041451.gif" /><br />
图 15</div>
<br />
将其复制并构建一个新字典：
<p class="info-box">
From_data={&#39;i&#39;:&#39;我愛中國&#39;,&#39;from&#39;:&#39;zh-CHS&#39;,&#39;to&#39;:&#39;en&#39;,&#39;smartresult&#39;:&#39;dict&#39;,&#39;client&#39;:&#39;fanyideskweb&#39;,&#39;salt&#39;:&#39;15477056211258&#39;,&#39;sign&#39;:&#39;b3589f32c38bc9e3876a570b8a992604&#39;,&#39;ts&#39;:&#39;1547705621125&#39;,&#39;bv&#39;:&#39;b33a2f3f9d09bde064c9275bcb33d94e&#39;,&#39;doctype&#39;:&#39;json&#39;,&#39;version&#39;:&#39;2.1&#39;,&#39;keyfrom&#39;:&#39;fanyi.web&#39;,&#39;action&#39;:&#39;FY_BY_REALTIME&#39;,&#39;typoResult&#39;:&#39;false&#39;}</p>
接下来使用 requests.post 方法请求表单数据，代码如下：
<p class="info-box">
import requests&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #导入requests包<br />
response = requests.post(url,data=payload)</p>
将字符串格式的数据转换成 JSON 格式数据，并根据<a href='/data_structure/' target='_blank'>数据结构</a>，提取数据，并将翻译结果打印出来，代码如下：<br />
<pre class="python">
import json
content = json.loads(response.text)
print(content[&#39;translateResult&#39;][0][0][&#39;tgt&#39;])</pre>
使用 requests.post 方法抓取有道翻译结果的完整代码如下：<br />
<pre class="python">
import requests        #导入requests包
import json
def get_translate_date(word=None):
url = &#39;http://fanyi.youdao.com/translate_o?smartresult=dict&amp;smartresult=rule&#39;
From_data={&#39;i&#39;:word,&#39;from&#39;:&#39;zh-CHS&#39;,&#39;to&#39;:&#39;en&#39;,&#39;smartresult&#39;:&#39;dict&#39;,&#39;client&#39;:&#39;fanyideskweb&#39;,&#39;salt&#39;:&#39;15477056211258&#39;,&#39;sign&#39;:&#39;b3589f32c38bc9e3876a570b8a992604&#39;,&#39;ts&#39;:&#39;1547705621125&#39;,&#39;bv&#39;:&#39;b33a2f3f9d09bde064c9275bcb33d94e&#39;,&#39;doctype&#39;:&#39;json&#39;,&#39;version&#39;:&#39;2.1&#39;,&#39;keyfrom&#39;:&#39;fanyi.web&#39;,&#39;action&#39;:&#39;FY_BY_REALTIME&#39;,&#39;typoResult&#39;:&#39;false&#39;}
#请求表单数据
response = requests.post(url,data=From_data)
#将Json格式字符串转字典
content = json.loads(response.text)
print(content)
#打印翻译后的数据
#print(content[&#39;translateResult&#39;][0][0][&#39;tgt&#39;])
if __name__==&#39;__main__&#39;:
get_translate_date(&#39;我爱中国&#39;)</pre>
<h2>
使用 Beautiful Soup 解析网页</h2>
通过 requests 库已经可以抓到网页源码，接下来要从源码中找到并提取数据。Beautiful Soup 是 python 的一个库，其最主要的功能是从网页中抓取数据。Beautiful Soup 目前已经被移植到 bs4 库中，也就是说在导入 Beautiful Soup 时需要先安装 bs4 库。<br />
<br />
安装 bs4 库的方式如图 16 所示:
<div style="text-align: center;">
<br />
<img alt="" src="/uploads/allimg/190117/2-1Z11GA15bD.gif" /><br />
图 16</div>
<br />
安装好 bs4 库以后，还需安装 lxml 库。如果我们不安装 lxml 库，就会使用 Python 默认的解析器。尽管 Beautiful Soup 既支持 Python 标准库中的 HTML 解析器又支持一些第三方解析器，但是 lxml 库具有功能更加强大、速度更快的特点，因此笔者推荐安装 lxml 库。<br />
<br />
安装 Python 第三方库后，输入下面的代码，即可开启 Beautiful Soup 之旅：<br />
<pre class="python">
import requests        #导入requests包
from bs4 import    BeautifulSoup
url=&#39;http://www.cntour.cn/&#39;
strhtml=requests.get(url)
soup=BeautifulSoup(strhtml.text,&#39;lxml&#39;)
data = soup.select(&#39;#main&gt;div&gt;div.mtop.firstMod.clearfix&gt;div.centerBox&gt;ul.newsList&gt;li&gt;a&#39;)
print(data)</pre>
代码运行结果如图 17 所示。
<div style="text-align: center;">
<br />
<img alt="" src="/uploads/allimg/190117/2-1Z11GA244Q8.jpg" /><br />
图 17（<a href="/uploads/allimg/190117/2-1Z11GA30cY.jpg" target="_blank">点此查看高清大图</a>）</div>
<br />
Beautiful Soup 库能够轻松解析网页信息，它被集成在 bs4 库中，需要时可以从 bs4 库中调用。其表达语句如下：
<p class="info-box">
from bs4 import BeautifulSoup</p>
首先，HTML 文档将被转换成 Unicode 编码格式，然后 Beautiful Soup 选择最合适的解析器来解析这段文档，此处指定 lxml 解析器进行解析。解析后便将复杂的 HTML 文档转换成树形结构，并且每个节点都是 Python 对象。这里将解析后的文档存储到新建的变量 soup 中，代码如下：<br />
<p class="info-box">
soup=BeautifulSoup(strhtml.text,&#39;lxml&#39;)</p>
接下来用 select（选择器）定位数据，定位数据时需要使用浏览器的开发者模式，将鼠标光标停留在对应的数据位置并右击，然后在快捷菜单中选择&ldquo;检查&rdquo;命令，如图 18 所示：
<div style="text-align: center;">
<br />
<img alt="" src="/uploads/allimg/190117/2-1Z11GA40T17.gif" /><br />
图 18</div>
<br />
随后在浏览器右侧会弹出开发者界面，右侧高亮的代码（参见图&nbsp; 19(b)）对应着左侧高亮的数据文本（参见图 19(a)）。右击右侧高亮数据，在弹出的快捷菜单中选择&ldquo;Copy&rdquo;➔&ldquo;Copy Selector&rdquo;命令，便可以自动复制路径。
<div style="text-align: center;">
<br />
<img alt="" src="/uploads/allimg/190117/2-1Z11GA45JN.gif" /><br />
图 19 复制路径</div>
将路径粘贴在文档中，代码如下:<br />
<p class="info-box">
#main &gt; div &gt; div.mtop.firstMod.clearfix &gt; div.centerBox &gt; ul.newsList &gt; li:nth-child(1) &gt; a</p>
由于这条路径是选中的第一条的路径，而我们需要获取所有的头条新闻，因此将 li：nth-child（1）中冒号（包含冒号）后面的部分删掉，代码如下：
<p class="info-box">
#main &gt; div &gt; div.mtop.firstMod.clearfix &gt; div.centerBox &gt; ul.newsList &gt; li &gt; a</p>
使用 soup.select 引用这个路径，代码如下：<br />
<p class="info-box">
data = soup.select(&#39;#main &gt; div &gt; div.mtop.firstMod.clearfix &gt; div.centerBox &gt; ul.newsList &gt; li &gt; a&#39;)</p>
<h2>
清洗和组织数据</h2>
至此，获得了一段目标的 HTML 代码，但还没有把数据提取出来，接下来在 PyCharm 中输入以下代码：<br />
<pre class="python">
for item in data:
result={
    &#39;title&#39;:item.get_text(),
    &#39;link&#39;:item.get(&#39;href&#39;)
}
print(result)</pre>
代码运行结果如图 20 所示：
<div style="text-align: center;">
<img alt="" src="/uploads/allimg/190117/2-1Z11GA60R06.gif" /><br />
图 20（<a href="/uploads/allimg/190117/2-1Z11GA629403.jpg" target="_blank">点此查看高清大图</a>）</div>
<br />
首先明确要提取的数据是标题和链接，标题在＜a＞标签中，提取标签的正文用 get_text() 方法。链接在＜a＞标签的 href 属性中，提取标签中的 href 属性用 get() 方法，在括号中指定要提取的属性数据，即 get(＇href＇)。<br />
<br />
从图 20 中可以发现，文章的链接中有一个数字 ID。下面用正则表达式提取这个 ID。需要使用的正则符号如下:
<p class="info-box">
\d匹配数字<br /></li>
</ul>
<p>+匹配前一个字符1次或多次</p><br>在 Python 中调用正则表达式时使用 re 库，这个库不用安装，可以直接调用。在 PyCharm 中输入以下代码:</p>
<pre class="python">
import re
for item in data:
    result={
        &quot;title&quot;:item.get_text(),
        &quot;link&quot;:item.get(&#39;href&#39;),
        &#39;ID&#39;:re.findall(&#39;\d+&#39;,item.get(&#39;href&#39;))
    }
print(result)</pre>
<p>运行结果如图 21 所示：</p>
<div style="text-align: center;">
<br />
<img alt="" src="/uploads/allimg/190117/2-1Z11GAHKD.jpg" /><br />
图 21</div>
<br />
这里使用 re 库的 findall 方法，第一个参数表示正则表达式，第二个参数表示要提取的文本。<br />
<h2>
爬虫攻防战</h2>
爬虫是模拟人的浏览访问行为，进行数据的批量抓取。当抓取的数据量逐渐增大时，会给被访问的服务器造成很大的压力，甚至有可能崩溃。换句话就是说，服务器是不喜欢有人抓取自己的数据的。那么，网站方面就会针对这些爬虫者，采取一些反爬策略。<br />
<br />
服务器第一种识别爬虫的方式就是通过检查连接的 useragent 来识别到底是浏览器访问，还是代码访问的。如果是代码访问的话，访问量增大时，服务器会直接封掉来访 IP。<br />
<br />
那么应对这种初级的反爬机制，我们应该采取何种举措？<br />
<br />
还是以前面创建好的爬虫为例。在进行访问时，我们在开发者环境下不仅可以找到 URL、Form Data，还可以在 Request headers 中构造浏览器的请求头，封装自己。服务器识别浏览器访问的方法就是判断 keyword 是否为 Request headers 下的 User-Agent，如图 22 所示。
<div style="text-align: center;">
<br />
<img alt="" src="/uploads/allimg/190117/2-1Z11GAR3P1.jpg" /><br />
图 22</div>
<br />
因此，我们只需要构造这个请求头的参数。创建请求头部信息即可，代码如下：<br />
<p class="info-box">
headers={&#39;User-Agent&#39;:&#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.110 Safari/537.36&#39;}<br />
response = request.get(url,headers=headers)</p>
写到这里，很多读者会认为修改 User-Agent 很太简单。确实很简单，但是正常人1秒看一个图，而个爬虫1秒可以抓取好多张图，比如 1 秒抓取上百张图，那么服务器的压力必然会增大。也就是说，如果在一个 IP 下批量访问下载图片，这个行为不符合正常人类的行为，肯定要被封 IP。<br />
<br />
其原理也很简单，就是统计每个IP的访问频率，该频率超过阈值，就会返回一个验证码，如果真的是用户访问的话，用户就会填写，然后继续访问，如果是代码访问的话，就会被封 IP。<br />
<br />
这个问题的解决方案有两个，第一个就是常用的增设延时，每 3 秒钟抓取一次，代码如下：
<p class="info-box">
import time<br />
time.sleep(3)</p>
但是，我们写爬虫的目的是为了高效批量抓取数据，这里设置 3 秒钟抓取一次，效率未免太低。其实，还有一个更重要的解决办法，那就是从本质上解决问题。<br />
<br />
不管如何访问，服务器的目的就是查出哪些为代码访问，然后封锁 IP。解决办法：为避免被封 IP，在数据采集时经常会使用代理。当然，requests 也有相应的 proxies 属性。<br />
<br />
首先，构建自己的代理 IP 池，将其以字典的形式赋值给 proxies，然后传输给 requests，代码如下：<br />
<pre class="python">
proxies={
    &quot;http&quot;:&quot;http://10.10.1.10:3128&quot;,
    &quot;https&quot;:&quot;http://10.10.1.10:1080&quot;,
}
response = requests.get(url, proxies=proxies)</pre>
<h2>
扩展阅读</h2>
本文仅对 Python 爬虫及实现过程做了简明扼要地介绍。
<br />
<br />
如果你想对 Python 爬虫有更深入的了解，我推荐你阅读：
<ul>
<li>
<a href="https://www.cnblogs.com/Albert-Lee/p/6226699.html" target="_blank">Python爬虫入门教程&nbsp;</a></li>
<li>
<a href="https://blog.csdn.net/c406495762/article/details/78123502" target="_blank">Python3网络爬虫入门教程</a></li>
<li>
<a href="http://www.imooc.com/learn/563" target="_blank">Python爬虫教程&mdash;&mdash;慕课网</a></li>
</ul></p>
      <div class="post-button"><a class="btn" href="/2021/05/23/%E7%88%AC%E8%99%AB%E5%88%9D%E5%A7%8B%E7%84%A6/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>阅读更多</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2021/05/23/%E7%99%BE%E5%BA%A6%E6%96%87%E5%BA%93%E7%88%AC%E8%99%AB/">百度文库爬虫</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2021-05-23 | <i class="fa fa-folder-o"></i> <a class="category-link" href="/categories/python%E7%88%AC%E8%99%AB/">python爬虫</a></span>
      <p><pre><code>#-*- coding:UTF-8 -*-
from selenium import webdriver
from bs4 import BeautifulSoup
import re
import time

if __name__ == &#39;__main__&#39;:


   options = webdriver.ChromeOptions()
   options.add_argument(&#39;user-agent=&quot;Mozilla/5.0 (Linux; Android 4.0.4; Galaxy Nexus Build/IMM76B) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.133 Mobile Safari/535.19&quot;&#39;)
   driver = webdriver.Chrome(&#39;J:\迅雷下载\chromedriver.exe&#39;, chrome_options=options)
   driver.get(&#39;https://wenku.baidu.com/view/aa31a84bcf84b9d528ea7a2c.html&#39;)

   html = driver.page_source
   bf1 = BeautifulSoup(html, &#39;lxml&#39;)
   result = bf1.find_all(class_=&#39;rtcspage&#39;)
   bf2 = BeautifulSoup(str(result[0]), &#39;lxml&#39;)
   title = bf2.div.div.h1.string
   pagenum = bf2.find_all(class_=&#39;size&#39;)
   pagenum = BeautifulSoup(str(pagenum),  &#39;lxml&#39;).span.string
   pagepattern = re.compile(&#39;页数：(\d+)页&#39;)
   num = int(pagepattern.findall(pagenum)[0])
   print(&#39;文章标题：%s&#39; % title)
   print(&#39;文章页数：%d&#39; % num)


   while True:
       num = num / 5.0
       html = driver.page_source
       bf1 = BeautifulSoup(html, &#39;lxml&#39;)
       result = bf1.find_all(class_=&#39;rtcspage&#39;)
       for each_result in result:
           bf2 = BeautifulSoup(str(each_result), &#39;lxml&#39;)
           texts = bf2.find_all(&#39;p&#39;)
           for each_text in texts:
                  main_body = BeautifulSoup(str(each_text), &#39;lxml&#39;)
               for each in main_body.find_all(True):
                   if each.name == &#39;span&#39;:
                       print(each.string.replace(&#39;\xa0&#39;,&#39;&#39;),end=&#39;&#39;)
                   elif each.name == &#39;br&#39;:
                       print(&#39;&#39;)
           print(&#39;\n&#39;)
       if num &gt; 1:
           page = driver.find_elements_by_xpath(&quot;//div[@class=&#39;page&#39;]&quot;)
           driver.execute_script(&#39;arguments[0].scrollIntoView();&#39;, page[-1]) #拖动到可见的元素去
           nextpage = driver.find_element_by_xpath(&quot;//a[@data-fun=&#39;next&#39;]&quot;)
           nextpage.click()
           time.sleep(3)
       else:
           break
</code></pre>
</p>
      <div class="post-button"><a class="btn" href="/2021/05/23/%E7%99%BE%E5%BA%A6%E6%96%87%E5%BA%93%E7%88%AC%E8%99%AB/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>阅读更多</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2021/05/21/%E6%B4%BE%E6%A3%AE%E7%88%AC%E8%99%AB%E9%9B%86/">派森爬虫集</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2021-05-21 | <i class="fa fa-folder-o"></i> <a class="category-link" href="/categories/python%E7%88%AC%E8%99%AB/">python爬虫</a></span>
      <p><h1 id="派森码"><a href="#派森码" class="headerlink" title="派森码"></a>派森码</h1><p>收集各种爬虫 （python）, 提 pr 或 issue, 收集脚本见此项目 <a target="_blank" rel="noopener" href="https://github.com/5-luc/github_search">github-search</a></p>
<p>warning: 爬虫有时效性，如没法直接运行，请适当更改逻辑。</p>
<h3 id="A"><a href="#A" class="headerlink" title="A"></a>A</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/s-rah/onionscan">暗网爬虫(Go)</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/x-spiders/aiss-spider">爱丝APP图片爬虫</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/Carmenliukang/1688_crawler-image_search_products">1688以图搜货</a></li>
</ul>
<h3 id="B"><a href="#B" class="headerlink" title="B"></a>B</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/airingursb/bilibili-user">Bilibili 用户</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/airingursb/bilibili-video">Bilibili 视频</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/AngelKitty/bilibili-smallvideo">Bilibili 小视频</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/zhangzp9970/GnomeBingLockScreen">Bing美图爬虫</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/chenjiandongx/bili-spider">B站760万视频信息爬虫</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/chokcoco/cnblogSpider">博客园(node.js)</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/nswbmw/micro-scraper">百度百科(node.js)</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/Marcus-T/Crawler_Job">北邮人水木清华招聘</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/gudegg/yunSpider">百度云网盘</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/Chion82/hello-old-driver">琉璃神社爬虫</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/xianyunyh/spider_job">Boss 直聘</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/qzcool/Ke">贝壳网找房爬虫</a></li>
</ul>
<h3 id="C"><a href="#C" class="headerlink" title="C"></a>C</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/jackgitgz/CnblogsSpider">cnblog</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/LintBin/1024crawer">caoliu 1024</a></li>
</ul>
<h3 id="D"><a href="#D" class="headerlink" title="D"></a>D</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/lanbing510/DouBanSpider">豆瓣读书</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/dontcontactme/doubanspiders">豆瓣爬虫集</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/rockdai/haixiu">豆瓣害羞组</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/CasterWx/java-Crawler/tree/master/src/%E7%88%AC%E8%99%AB/%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90/%E8%B1%86%E7%93%A3%E5%9B%BE%E4%B9%A6%E6%B7%B1%E5%BA%A6%E7%88%AC%E5%8F%96">豆瓣图书广度爬取</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/TheRook/subbrute">DNS记录和子域名</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/chenjiandongx/magnet-dht">DHT网络磁力种子爬虫</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/Python3WebSpider/DouYin">抖音</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/cnbattle/douyin">抖音推荐</a></li>
</ul>
<h3 id="E"><a href="#E" class="headerlink" title="E"></a>E</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/shuiqukeyou/E-HentaiCrawler">E绅士</a></li>
</ul>
<h3 id="G"><a href="#G" class="headerlink" title="G"></a>G</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/pein0119/girl-atlas-crawler">Girl-atlas</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/xuelangcxy/girlCrawler">girl13</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/bonfy/github-trending">github trending</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/chenjiandongx/Github">Github 仓库及用户分析爬虫</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/dta0502/NBSPRC-spider">国家统计用区划代码和城乡划分代码爬虫</a></li>
</ul>
<h3 id="H"><a href="#H" class="headerlink" title="H"></a>H</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/stevenshuang/spider/tree/master/hdoj">HDOJ爬虫</a></li>
</ul>
<h3 id="I"><a href="#I" class="headerlink" title="I"></a>I</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/xTEddie/Scrapstagram">Instagram</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/XetRAHF/Scrapping-INC500">INC500 世界5000强爬虫</a></li>
</ul>
<h3 id="J"><a href="#J" class="headerlink" title="J"></a>J</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/taizilongxu/scrapy_jingdong">京东</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/Chyroc/JDong">京东搜索+评论</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/samrayleung/jd_spider">京东商品+评论</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/fankcoder/findtrip">机票</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/kulovecc/jandan_spider">煎蛋妹纸</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/Tony-Chiong/jandan_spider">煎蛋妹纸selenium版本</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lzjqsdd/NewsSpider">今日头条，网易，腾讯等新闻</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/CasterWx/java-Crawler/tree/master/src/%E7%88%AC%E8%99%AB/%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90/Book">计算机书籍控图书</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/CourierKyn/jkcrawler">JK (制服写真) 爬虫</a></li>
</ul>
<h3 id="K"><a href="#K" class="headerlink" title="K"></a>K</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/atonasting/zhihuspider">看知乎</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/xinqiu/kechenggezi-Spider">课程格子校花榜</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/wudaown/konachanDL">konachan</a></li>
</ul>
<h3 id="L"><a href="#L" class="headerlink" title="L"></a>L</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/lanbing510/LianJiaSpider">链家</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/XuefengHuang/lianjia-scrawler">链家成交在售在租房源</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/GuozhuHe/webspider">拉勾</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/youfou/hsdata">炉石传说</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/bonfy/leetcode">leetcode</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/XetRAHF/Spider_LinkedInSalesNavigatorURL">领英销售导航器爬虫 LinkedInSalesNavigator</a></li>
</ul>
<h3 id="M"><a href="#M" class="headerlink" title="M"></a>M</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/eternal-flame-AD/mafengwo">马蜂窝 用户足迹</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/Thoxvi/MyCar_python">MyCar</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/miaoerduo/cartoon-cat">漫画喵 一键下载漫画~</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/qwertyuiop6/mm131">MM131性感美女写真图全爬取</a></li>
<li>美女写真套图爬虫 <a target="_blank" rel="noopener" href="https://github.com/chenjiandongx/mmjpg">（一）</a><a target="_blank" rel="noopener" href="https://github.com/chenjiandongx/mzitu">（二）</a><a target="_blank" rel="noopener" href="https://github.com/chenjiandongx/photo-gevent">（三）</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/3inchtime/mmjpg_spider">妹子图</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/CasterWx/python-maoyan-spider">猫眼网电影评分</a></li>
</ul>
<h3 id="N"><a href="#N" class="headerlink" title="N"></a>N</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/NolanZhao/news_feed">新闻监控</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/sy-records/speech_spiders/tree/master/nihaowu">你好污啊</a></li>
</ul>
<h3 id="O"><a href="#O" class="headerlink" title="O"></a>O</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/SilverBooker/ofoSpider">ofo共享单车爬虫</a></li>
</ul>
<h3 id="P"><a href="#P" class="headerlink" title="P"></a>P</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/littleVege/pixiv_crawl">Pixiv</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/xiyouMc/WebHubBot">PornHub</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/niqdev/packtpub-crawler">packtpub</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/eqblog/91_porn_spider">91porn</a></li>
</ul>
<h3 id="Q"><a href="#Q" class="headerlink" title="Q"></a>Q</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/LiuXingMing/QQSpider">QQ空间</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/caspartse/QQ-Groups-Spider">QQ 群</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/kehao95/thu_learn">清华大学网络学堂爬虫</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lining0806/QunarSpider">去哪儿</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/chenjiandongx/51job">前程无忧Python招聘岗位信息爬取分析</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/Wildwizard404/qqzhpt-spider">qqzhpt美女写真爬虫/批量下载</a></li>
</ul>
<h3 id="R"><a href="#R" class="headerlink" title="R"></a>R</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/gnehsoah/yyets-spider">人人影视</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/shanelau/rssSpider">RSS 爬虫</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/evilcos/crawlers">rosi 妹子图</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/tsarjak/WallpapersFromReddit">reddit 壁纸</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/dannyvai/reddit_crawlers">reddit</a></li>
</ul>
<h3 id="S"><a href="#S" class="headerlink" title="S"></a>S</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/Cortexelus/dadabots">soundcloud</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/chenjiandongx/stackoverflow">Stackoverflow 100万问答爬虫</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/chenjiandongx/soksaccounts">Shadowsocks 账号爬虫</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/chengyumeng/spider163">spider163 网易云音乐爬虫</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/Danielyan86/Movie-scrapy">时光网电影数据和海报爬虫</a></li>
</ul>
<h3 id="T"><a href="#T" class="headerlink" title="T"></a>T</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/facert/tumblr_spider">tumblr</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/cyang812/get_tumblr_likes">下载tumblr喜欢内容</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/waditu/tushare">TuShare</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/LiuXingMing/Tmall1212">天猫双12爬虫</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/carlonelong/TaobaoMMCrawler">Taobao mm</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/chenjiandongx/cup-size">Tmall 女性文胸尺码爬虫</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/xiaozhongliu/taobao-live-crawler">淘宝直播弹幕爬虫(node)</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/CasterWx/java-Crawler/tree/master/src/%E7%88%AC%E8%99%AB/%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90/%E7%88%AC%E5%8F%96%E8%AE%BA%E5%9D%9B%E6%96%87%E7%AB%A0">天涯论坛文章</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/qzcool/Tianyancha">天眼查爬虫</a></li>
</ul>
<h3 id="V"><a href="#V" class="headerlink" title="V"></a>V</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/qwertyuiop6/get_youtube_subtitle">Youtube字幕下载</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/billvsme/videoSpider">视频信息爬虫</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/chenqing/spider">电影网站</a></li>
</ul>
<h3 id="W"><a href="#W" class="headerlink" title="W"></a>W</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/hanc00l/wooyun_public">乌云公开漏洞</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/bowenpay/wechat-spider">微信公众号</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lijinma/wechat_spider">“代理”方式抓取微信公众号文章</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/armysheng/tech163newsSpider">网易新闻</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/dongweiming/commentbox">网易精彩评论</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lonsty/weibo-image-spider">微博图片爬虫</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/luzhijun/weiboSA">微博主题搜索分析</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/RitterHou/music-163">网易云音乐</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/CasterWx/java-Crawler/tree/master/src/%E7%88%AC%E8%99%AB/%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90/%E7%BD%91%E6%98%93%E4%BA%91%E7%83%AD%E8%AF%84%E7%88%AC%E5%8F%96">新.网易热评</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/CasterWx/java-Crawler/tree/master/src/%E7%88%AC%E8%99%AB/%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90/vip">唯品会商品</a></li>
</ul>
<h3 id="X"><a href="#X" class="headerlink" title="X"></a>X</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/decaywood/XueQiuSuperSpider">雪球股票信息(java)</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/LiuXingMing/SinaSpider">新浪微博</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/ResolveWang/weibospider">新浪微博分布式爬虫</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/sy-records/speech_spiders/tree/master/chicken-soup">心灵毒鸡汤</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/DropsDevopsOrg/ECommerceCrawlers/tree/master/XianyuCrawler">闲鱼最新商品爬取</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lonsty/xvideos-dl">H 片下载工具（xvideos.com）</a></li>
</ul>
<h3 id="Y"><a href="#Y" class="headerlink" title="Y"></a>Y</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/pockry/tv-crawler">英美剧 TV (node.js)</a></li>
</ul>
<h3 id="Z"><a href="#Z" class="headerlink" title="Z"></a>Z</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/chenjiandongx/wallpaper">ZOL 手机壁纸爬虫</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/LiuRoy/zhihu_spider">知乎(python)</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/owner888/phpspider">知乎(php)</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/yanzhou/CnkiSpider">知网</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/yjm12321/zhihu-girl">知乎妹子</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/facert/ziroom_realtime_spider">自如实时房源提醒</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/codeudan/crawler-china-mainland-universities.git">中国大陆高校列表爬虫</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lonsty/scraper">站酷（zcool.com.cn）图片爬虫</a></li>
</ul>
<h3 id=""><a href="#" class="headerlink" title="#"></a>#</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/but0n/JianSo_Movie">80s 影视资源爬虫 - JianSo_Movie</a></li>
</ul>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/Nyloner/Nyspider">各种爬虫</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/blueskyz/DHTCrawler">DHT 爬虫</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/dontcontactme/simDHT">SimDHT</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/dontcontactme/p2pspider">p2pspider</a></li>
</ul>
</p>
      <div class="post-button"><a class="btn" href="/2021/05/21/%E6%B4%BE%E6%A3%AE%E7%88%AC%E8%99%AB%E9%9B%86/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>阅读更多</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2021/05/20/%E4%B8%BA%E4%BB%80%E4%B9%88%E7%94%A8webpack/">为什么用webpack</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2021-05-20 | <i class="fa fa-folder-o"></i> <a class="category-link" href="/categories/Web%E5%89%8D%E7%AB%AF/">Web前端</a></span>
      <p><p>webpack 的出现和前端模块化的发展密不可分，所以在了解 webpack 之前，需要先了解前端模块化的进化史。</p>
<a id="more"></a>
<h2 id="一、引言"><a href="#一、引言" class="headerlink" title="一、引言"></a>一、引言</h2><p>对于 js 的编写，不能像其他语言一样很好的支持模块化，很多程序会比较臃肿的丢在一个文件里，要把这个程序拆分开使用，两个文件之前变量的传递就是个问题。</p>
<p>模块化的的第一个阶段，是使用的全局模式。假如一个文件要使用另一个文件中的变量，就需要将这个变量定为全局变量，挂到 window  对象上面，这样虽然解决了变量共享的问题，但是这样不仅污染全局对象，而且很容易引起命名冲突覆盖之前的变量。于是，前端模块化的又摸索开始了。</p>
<p>到了第二个阶段，人们开始用对象分装这些数据，这样做避免了命名冲突，但是这些数据可以通过对象直接访问到，即没有做到数据私有化。使得数据不安全。</p>
<p>到了第三个阶段，立即执行函数的引入，很好的解决了数据是私有的问题，但是当前这个模块依赖另一个模块时就不好处理了。</p>
<p>到了第四个阶段，开始出现引入依赖的思想，诸如 commonjs、AMD、ES6 等等规范，他们都是将一个文件作为一个模块来看待，但是浏览器并不识别他们，所以中间就需要一个东西来翻译一下，让浏览器看的懂，即将他们转成浏览器能读懂的 js ，这个时候 webpack 就出现了，它就充当了这个翻译的角色。</p>
<p>下面看一个 demo 感受一下。这个 demo 要实现的主体效果是我一个文件里定义了变量，在另一个文件里引用它输出。</p>
<h2 id="二、传统开发"><a href="#二、传统开发" class="headerlink" title="二、传统开发"></a>二、传统开发</h2><p>先看没有使用 webpack 的场景。首先在你的工程下创建一个 index.html 文件，在 js 目录下再分别创建 a.js 和 b.js 文件。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/a.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/b.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>1）定义变量</p>
<p>a.js 文件中定义一个变量，要想让令一个文件中能访问到，就要把它挂到全局。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">window</span>.msg = <span class="string">'yin'</span>;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<p>2）引用变量</p>
<p>b.js 文件中输出这个变量。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'msg: '</span>, msg);</span><br></pre></td></tr></table></figure>
<p>3）查看结果</p>
<p>打开浏览器控制台可以看到如下效果：</p>
<p><img src="https://tva1.sinaimg.cn/large/00831rSTly1gcyk86igfdj31bu05cwev.jpg" alt=""></p>
<h2 id="三、模块化开发"><a href="#三、模块化开发" class="headerlink" title="三、模块化开发"></a>三、模块化开发</h2><p>1）导出变量</p>
<p>使用 exports 导出变量</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> msg = <span class="string">'yin'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;<span class="attr">msg</span>: msg&#125;;</span><br></pre></td></tr></table></figure>
<p>2）引入变量</p>
<p>在另一个文件中，以 require 的方式导入数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> msg = <span class="built_in">require</span>(<span class="string">'./a.js'</span>).msg;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'msg: '</span>, msg);</span><br></pre></td></tr></table></figure>
<p>3）运行</p>
<p>在控制台运行 b.js 文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node b.js</span><br></pre></td></tr></table></figure>
<p>可以看到控制台输出内容，但是到了浏览器中刷新的时候，会发现报错</p>
<p><img src="https://tva1.sinaimg.cn/large/00831rSTly1gcykdh2e5oj31by068q42.jpg" alt=""></p>
<p>这是意料之中的事情，因为浏览器本身不认识 node，要让它认识就需要拿 webpack 来编译一下。所以用 npm 先全局装一下 webpack</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack -g</span><br><span class="line"></span><br><span class="line">npm install webpack-cli -g</span><br></pre></td></tr></table></figure>
<p>这里将编译后的内容放到 dist 目录下，命名为 bundle.js，所以 html 文件中重新改一下引用方式。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./dist/bundle.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>最后编译一下，刷新浏览器，内容就又正常显示了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack ./js/b.js -o ./dist/bundle.js</span><br></pre></td></tr></table></figure>
<h2 id="四、优化"><a href="#四、优化" class="headerlink" title="四、优化"></a>四、优化</h2><p>1）配置 package.json 文件</p>
<p>对于编程来说，每次编译跑这么长代码很不优雅，webpack 给我们提供了很多配置，其中可以对指令进行配置，首先运行 <strong>npm init</strong>  安装 package.json 文件，然后局部安装 webpack，并在 scripts 中配置 <strong>“build”: “node_modules/.bin/webpack”</strong> 这一行，如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"webpack-demo"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">"main"</span>: <span class="string">"index.js"</span>,</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>,</span><br><span class="line">    <span class="attr">"build"</span>: <span class="string">"node_modules/.bin/webpack"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"keywords"</span>: [],</span><br><span class="line">  <span class="attr">"author"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">"license"</span>: <span class="string">"ISC"</span>,</span><br><span class="line">  <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"webpack"</span>: <span class="string">"^4.42.0"</span>,</span><br><span class="line">    <span class="attr">"webpack-cli"</span>: <span class="string">"^3.3.11"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2）配置 webpack.config.js 文件</p>
<p>这里写程序编译的出口和入口。    </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: <span class="string">'./js/b.js'</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3）运行</p>
<p>每次编译只需要运行<strong>npm run build</strong> 即可，刷新浏览器，控制台内容也正常输出。最终项目结构如下：</p>
<p><img src="https://tva1.sinaimg.cn/large/00831rSTly1gcyn60zyucj314a0iy0w9.jpg" alt=""></p>
<div class="qr-code"></div><div class="post-tag-list">标签: <a class="post-tags" href="/tags/网络安全/">网络安全</a></p>
      <div class="post-button"><a class="btn" href="/2021/05/20/%E4%B8%BA%E4%BB%80%E4%B9%88%E7%94%A8webpack/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>阅读更多</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2021/05/20/websocket/">websocket</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2021-05-20 | <i class="fa fa-folder-o"></i> <a class="category-link" href="/categories/Web%E5%89%8D%E7%AB%AF/">Web前端</a></span>
      <p><p><a id="more"></a></p>
<p>之后 comet 的出现实现了内容上的实时更新，但是 HTTP 本身的问题并未解决（通信只能客户端发起），于是出现了 WebSocket 协议。</p>
<blockquote>
<p>comet 是一种服务器向页面推送数据的技术，实现方式有长轮询和 HTTP 流。</p>
</blockquote>
<h2 id="二、WebSocket-协议"><a href="#二、WebSocket-协议" class="headerlink" title="二、WebSocket 协议"></a>二、WebSocket 协议</h2><h3 id="1、概念"><a href="#1、概念" class="headerlink" title="1、概念"></a>1、概念</h3><p>WebSocket 协议是 WEB 浏览器和 WEB 服务器全双工通信的标准。诞生于 2008 年，2011 年成为国际标准，目前支持的浏览器有 Firefox 6+、Safari 5+、Chrome、iOS 4+版Safari。</p>
<p>WebSocket 协议建立在 HTTP 协议基础之上，所以连接的发起方仍是客户端，一旦确立 WebSocket 通信连接，不论服务器还是客户端，任意一方都可直接向对方发送报文。协议的标识符是ws，加密的是wss。</p>
<h3 id="2、特点"><a href="#2、特点" class="headerlink" title="2、特点"></a>2、特点</h3><ul>
<li>服务器向客户直接端推送数据。</li>
<li>首部信息量小，通信量减少。</li>
<li>没有同源的限制。</li>
</ul>
<h3 id="3、通信过程"><a href="#3、通信过程" class="headerlink" title="3、通信过程"></a>3、通信过程</h3><p>WebSocket 通信需要在 HTTP 连接建立之后完成一次握手步骤。</p>
<p>客户端向服务器发送一个请求。需要用到 HTTP 的 Upgrade、Connection 首部字段，告知服务器通信协议发生改变。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">GET /chat HTTP/1.1</span><br><span class="line">Host: server.example.com</span><br><span class="line">Upgrade: websocket</span><br><span class="line">Connection: Upgrade</span><br><span class="line">Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==</span><br><span class="line">Origin: http://example.com</span><br><span class="line">Sec-WebSocket-Protocol: chat, superchat</span><br><span class="line">Sec-WebSocket-Version: 13</span><br><span class="line"></span><br><span class="line"><span class="comment"># Sec-WebSocket-Key 字段内记录着握手过程中必不可少的键值。</span></span><br><span class="line"><span class="comment"># Sec-WebSocket-Protocol 字段内记录使用的子协议。子协议按 WebSocket 协议标准在连接分开使用时，定义那些连接的名称。</span></span><br></pre></td></tr></table></figure>
<p>服务器收到请求后向客户端返回一个状态码 101 的响应。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 101 Switching Protocols</span><br><span class="line">Upgrade: websocket</span><br><span class="line">Connection: Upgrade</span><br><span class="line">Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=</span><br><span class="line">Sec-WebSocket-Protocol: chat</span><br><span class="line"></span><br><span class="line"><span class="comment"># Sec-WebSocket-Accept 的字段值是由握手请求中的 Sec-WebSocket-Key 的字段值生成的。</span></span><br></pre></td></tr></table></figure>
<p>成功握手确立 WebSocket 连接之后，通信时不再使用 HTTP 的数据帧，而采用 WebSocket 独立的数据帧。</p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gfylnc3b91j30wg0le11f.jpg" alt=""></p>
<h3 id="4、WebSocket-API"><a href="#4、WebSocket-API" class="headerlink" title="4、WebSocket API"></a>4、WebSocket API</h3><blockquote>
<p>更多详情 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/WebSocket" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/API/WebSocket</a></p>
</blockquote>
<h4 id="1）构造函数"><a href="#1）构造函数" class="headerlink" title="1）构造函数"></a>1）构造函数</h4><p>WebSocket(url[, protocols])，返回一个 <code>WebSocket</code> 对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ws = <span class="keyword">new</span> WebSocket(url); <span class="comment">// url 是绝对 url</span></span><br></pre></td></tr></table></figure>
<p>实例化 WebSocket 对象后，浏览器就会马上尝试创建连接。</p>
<h4 id="2）属性"><a href="#2）属性" class="headerlink" title="2）属性"></a>2）属性</h4><ul>
<li>readyState</li>
</ul>
<p>与 XHR 类似，WebSocket 也有一个表示当前状态的 readyState 属性，但是的值与 XHR 并不相同。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CONNECTING：值为0，表示正在连接。</span><br><span class="line">OPEN：值为1，表示连接成功，可以通信了。</span><br><span class="line">CLOSING：值为2，表示连接正在关闭。</span><br><span class="line">CLOSED：值为3，表示连接已经关闭，或者打开连接失败。</span><br></pre></td></tr></table></figure>
<h4 id="3）方法"><a href="#3）方法" class="headerlink" title="3）方法"></a>3）方法</h4><ul>
<li>send：对要传输的数据进行排队。（复杂的数据，在发送之前要进行序列化）</li>
<li>close：关闭当前链接。</li>
</ul>
<h4 id="4）事件"><a href="#4）事件" class="headerlink" title="4）事件"></a>4）事件</h4><p>使用 <code>addEventListener()</code> 或将一个事件监听器赋值给本接口的 <code>oneventname</code> 属性监听下面的事件。</p>
<ul>
<li>open：当一个 WebSocket 连接成功时触发。</li>
<li>close：当一个 WebSocket 连接被关闭时触发。</li>
<li>message：当通过 WebSocket 收到数据时触发。</li>
<li>error：当一个 WebSocket 连接因错误而关闭时触发，例如无法发送数据时。</li>
</ul>
<h2 id="三、实战"><a href="#三、实战" class="headerlink" title="三、实战"></a>三、实战</h2><h3 id="1、客户端"><a href="#1、客户端" class="headerlink" title="1、客户端"></a>1、客户端</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> ws = <span class="keyword">new</span> WebSocket(<span class="string">"ws://localhost:8888"</span>);</span></span><br><span class="line"><span class="undefined">  </span></span><br><span class="line"><span class="javascript">  ws.onopen = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">'server open'</span>);</span></span><br><span class="line"><span class="javascript">    ws.send(<span class="string">'hello world, server!'</span>);</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  ws.onmessage = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">"client receive data："</span>, e.data);</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  ws.onclose = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">"server close"</span>);</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2、服务器"><a href="#2、服务器" class="headerlink" title="2、服务器"></a>2、服务器</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">'koa'</span>);</span><br><span class="line"><span class="keyword">const</span> WebSocket = <span class="built_in">require</span>(<span class="string">'ws'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa();</span><br><span class="line"><span class="keyword">const</span> ws = <span class="keyword">new</span> WebSocket.Server(&#123; <span class="attr">port</span>: <span class="number">8888</span> &#125;);</span><br><span class="line"></span><br><span class="line">ws.on(<span class="string">'connection'</span>, ws =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'websocket connection'</span>);</span><br><span class="line">  </span><br><span class="line">  ws.send(<span class="string">'hello world, client!'</span>);</span><br><span class="line">  </span><br><span class="line">  ws.on(<span class="string">'open'</span>, msg =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'server open'</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  ws.on(<span class="string">'message'</span>, msg =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'server receive msg：'</span>, msg);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  ws.on(<span class="string">'close'</span>, msg =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'client close'</span>,);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Koa is listening in <span class="subst">$&#123;<span class="number">3000</span>&#125;</span>`</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<div class="qr-code"></div><div class="post-tag-list">标签: <a class="post-tags" href="/tags/网络安全/">网络安全</a>
</p>
      <div class="post-button"><a class="btn" href="/2021/05/20/websocket/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>阅读更多</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2021/05/20/%E5%89%8D%E7%AB%AF%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E6%96%B9%E6%A1%88/">前端数据存储方案</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2021-05-20 | <i class="fa fa-folder-o"></i> <a class="category-link" href="/categories/Web%E5%89%8D%E7%AB%AF/">Web前端</a></span>
      <p><p><a id="more"></a></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gh06exiu2nj31nw0u0n2h.jpg" alt=""></p>
<p><br></p>
<h2 id="一、Cookie"><a href="#一、Cookie" class="headerlink" title="一、Cookie"></a>一、Cookie</h2><h3 id="1、概念"><a href="#1、概念" class="headerlink" title="1、概念"></a>1、概念</h3><p>Cookie 指某些网站为了辨别用户身份而储存在用户本地终端上的数据。每次请求都会把本地的 Cookie 发到服务器，让服务器知道当前用户的状态。</p>
<p>Cookie 有域的概念，不能跨域操作。</p>
<h3 id="2、适用场景"><a href="#2、适用场景" class="headerlink" title="2、适用场景"></a>2、适用场景</h3><p>适合客户端存储较少的数据，用于标识状态（用户登录状态、购物车等）。</p>
<h3 id="3、特点"><a href="#3、特点" class="headerlink" title="3、特点"></a>3、特点</h3><p><strong>1）数据存放位置</strong>：客户端浏览器缓存中。</p>
<p><strong>2）数据存储大小</strong>：Cookie 存储的数据不能超过 4 KB，浏览器支持的 Cookie 是30～50个，IE6 20个。</p>
<p><strong>3）数据有效期</strong>：cookie 支持设置数据过期时间。</p>
<p><strong>4）数据作用域</strong>：cookie 在所有同源窗口中共享。</p>
<h3 id="4、缺点"><a href="#4、缺点" class="headerlink" title="4、缺点"></a>4、缺点</h3><p>Cookie 容量小（4K）；不安全，容易被拦截暴露数据。</p>
<h3 id="5、API"><a href="#5、API" class="headerlink" title="5、API"></a>5、API</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/cookie" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/API/Document/cookie</a></p>
<h3 id="6、HTTP-请求头字段相关"><a href="#6、HTTP-请求头字段相关" class="headerlink" title="6、HTTP 请求头字段相关"></a>6、HTTP 请求头字段相关</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1）Expires：cookie最长有效期</span><br><span class="line">2）Max-Age：在 cookie 失效之前需要经过的秒数。（当Expires和Max-Age同时存在时，以 Max-Age 为准）</span><br><span class="line">3）Domain：指定 cookie 可以送达的主机名。</span><br><span class="line">4）Path：指定一个 URL 路径，这个路径必须出现在要请求的资源的路径中才可以发送 Cookie 首部</span><br><span class="line">5）Secure：一个带有安全属性的 cookie 只有在请求使用SSL和HTTPS协议的时候才会被发送到服务器。</span><br><span class="line">6）HttpOnly: 设置了 HttpOnly 属性的 cookie 不能使用 JavaScript 经由 Document.cookie 属性、XMLHttpRequest 和 Request APIs 进行访问，以防范跨站脚本攻击（XSS）。</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="二、Web-Storage"><a href="#二、Web-Storage" class="headerlink" title="二、Web Storage"></a>二、Web Storage</h3><h3 id="1、概念-1"><a href="#1、概念-1" class="headerlink" title="1、概念"></a>1、概念</h3><p>Web Storage 有 sessionStorage 和 localStorage 两种存储机制。</p>
<p>sessionStorage 为每一个给定的源维持一个独立的存储区域，该存储区域在页面会话期间可用；localStorage 在浏览器关闭，然后重新打开后数据仍然存在，可用作持久存储数据。</p>
<h3 id="2、适用场景-1"><a href="#2、适用场景-1" class="headerlink" title="2、适用场景"></a>2、适用场景</h3><p>适合客户端存储较少的数据，且数字存储时会转成字符串。</p>
<h3 id="3、特点-1"><a href="#3、特点-1" class="headerlink" title="3、特点"></a>3、特点</h3><p><strong>1）数据存放位置</strong>：sessionStorage 和 localStorage 的数据仅在本地保存，不会自动发送给服务器。</p>
<p><strong>2）数据存储大小</strong>：5M。</p>
<p><strong>3）数据有效期</strong>：sessionStorage 仅在当前浏览器窗口关闭之前有效；localStorage 始终有效，窗口或浏览器关闭也一直保存。</p>
<p><strong>4）数据作用域</strong>：sessionStorage 即使同一页面，不同的浏览器窗口中也不共享；localstorage 在所有同源窗口中都共享。</p>
<p><strong>5）同步：</strong>操作数据是同步的。</p>
<h3 id="4、缺点-1"><a href="#4、缺点-1" class="headerlink" title="4、缺点"></a>4、缺点</h3><p>不能用于存储重要信息，本地储存数据都容易被篡改，容易受到 XSS 攻击。</p>
<h3 id="5、API-1"><a href="#5、API-1" class="headerlink" title="5、API"></a>5、API</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Storage_API/" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Storage_API/</a></p>
<p><br></p>
<h2 id="三、IndexedDB"><a href="#三、IndexedDB" class="headerlink" title="三、IndexedDB"></a>三、IndexedDB</h2><h3 id="1、概念-2"><a href="#1、概念-2" class="headerlink" title="1、概念"></a>1、概念</h3><p>IndexedDB 是一种在用户浏览器中持久存储数据的方法，用于客户端存储大量结构化数据(包括文件/ 二进制大型对象(blobs)。</p>
<h3 id="2、适用场景-2"><a href="#2、适用场景-2" class="headerlink" title="2、适用场景"></a>2、适用场景</h3><p>适合客户端存储大量结构化数据。</p>
<h3 id="3、特点-2"><a href="#3、特点-2" class="headerlink" title="3、特点"></a>3、特点</h3><p><strong>1）键值对储存：</strong> IndexedDB 内部采用对象仓库（object store）存放数据。所有类型的数据都可以直接存入，包括字符串、JavaScript 对象、二进制数据（ArrayBuffer 对象和 Blob 对象）。对象仓库中，数据以”键值对”的形式保存，每一个数据记录都有对应的主键，主键是独一无二的，不能有重复，否则会抛出一个错误。</p>
<p><strong>2）数据存储大小</strong>： 取决于硬盘大小，<strong>全局限制</strong>为可用磁盘空间的50％。如果超过此范围，则会发起称为<strong>源回收</strong>的过程，删除整个源的数据，直到存储量再次低于限制。删除源数据没有只删一部分的说法——因为这样可能会导致不一致的问题。<strong>组限制</strong>——这被定义为全局限制的20％，但它至少有10 MB，最大为2GB。</p>
<p><strong>3）异步：</strong> IndexedDB 操作时不会锁死浏览器，用户依然可以进行其他操作，这与 LocalStorage 形成对比，后者的操作是同步的。异步设计是为了防止大量数据的读写，拖慢网页的表现。</p>
<p><strong>4）支持事务：</strong> IndexedDB 支持事务（transaction），这意味着一系列操作步骤之中，只要有一步失败，整个事务就都取消，数据库回滚到事务发生之前的状态，不存在只改写一部分数据的情况。</p>
<p><strong>5）同源限制：</strong> IndexedDB 受到同源限制，每一个数据库对应创建它的域名。网页只能访问自身域名下的数据库，而不能访问跨域的数据库。</p>
<h3 id="4、缺点-2"><a href="#4、缺点-2" class="headerlink" title="4、缺点"></a>4、缺点</h3><p>不能设置数据存储的范围，数据太多时就比较占内存。</p>
<h3 id="5、API-2"><a href="#5、API-2" class="headerlink" title="5、API"></a>5、API</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API/" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API/</a></p>
<h3 id="6、第三方类库"><a href="#6、第三方类库" class="headerlink" title="6、第三方类库"></a>6、第三方类库</h3><ul>
<li><a href="https://localforage.github.io/localForage/" target="_blank" rel="noopener">localForage</a>：一个简单名称的Polyfill：客户端数据存储的值语法，它在后台使用IndexedDB，但在不支持IndexedDB的浏览器中回退到WebSQL或localStorage。</li>
<li><a href="http://www.dexie.org/" target="_blank" rel="noopener">Dexie.js</a>：IndexedDB的包装器，通过简单的语法，可以更快地进行代码开发。</li>
<li><a href="https://pouchdb.com/" target="_blank" rel="noopener">PouchDB</a>：使用IndexedDB在浏览器中实现CouchDB的客户端。</li>
<li><a href="https://github.com/jakearchibald/idb" target="_blank" rel="noopener">idb</a>：一个微小的（〜1.15k）库，主要反映了IndexedDB的API，但小的改进，使一个很大的区别的可用性。</li>
</ul>
<p><br></p>
<h2 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h2><p><a href="http://www.ruanyifeng.com/blog/2018/07/indexeddb.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2018/07/indexeddb.html</a></p>
<p><br></p>


</div><div class="post-tag-list">标签: <a class="post-tags" href="/tags/Web-前端/">Web 前端</a></p>
      <div class="post-button"><a class="btn" href="/2021/05/20/%E5%89%8D%E7%AB%AF%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E6%96%B9%E6%A1%88/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>阅读更多</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2021/05/20/%E8%BF%90%E8%BE%93%E5%B1%82/">运输层</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2021-05-20 | <i class="fa fa-folder-o"></i> <a class="category-link" href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/">网络安全</a></span>
      <p><p>从IP层来说，通信的两端是两台主机，但是真正进行通信的实体是在主机中的进程，即一台主机的进程和另一台主机的进程交换数据。</p>
<a id="more"></a>
<p>2）作用</p>
<ul>
<li><p>传输层为相互通信的应用进程提供了逻辑通信</p>
</li>
<li><p>传输层还要对收到的报文进行差错检测</p>
</li>
<li><p>传输层提供面向连接和无连接的服务</p>
</li>
</ul>
<p>3）传输层协议和网络层协议的主要区别</p>
<ul>
<li><p>IP协议：为主机之间提供逻辑通信</p>
</li>
<li><p>TCP和UDP：为应用进程之间提供端到端的逻辑通信</p>
</li>
</ul>
<p><img src="https://img-blog.csdn.net/20180714005101694?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1lpbl9Ib25nd2Vp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">​</p>
<h3 id="2、传输层的端口"><a href="#2、传输层的端口" class="headerlink" title="2、传输层的端口"></a>2、传输层的端口</h3><p>1）端口的概念</p>
<p>运行在计算机中的进程是用进程标识符来标志的。为了使运行不同操作系统的计算机的应用进程能够互相通信，就必须用统一的方法对 TCP/IP 体系的应用进程进行标志，解决这个问题的方法就是在传输层使用协议端口号或端口。虽然通信的终点是应用进程，但只要把要传送的报文交到目的主机的某一个合适的目的端口，剩下的工作（即最后交付目的进程）就由 TCP / UDP 来完成。端口号只具有本地意义，它只是为了标志本地计算机应用层的各个进程在和传输层交互时的层间接口。</p>
<p>2）软件端口与硬件端口</p>
<p>协议栈层间的抽象的协议端口是软件端口。路由器或交换机上的端口是硬件端口。硬件端口是不同硬件设备进行交互的接口，而软件端口是应用层的各种协议进程与运输实体进行层间交互的一种地址。 </p>
<p>3）端口的分类</p>
<p>（1）服务器端的端口</p>
<ul>
<li><p>熟知端口（0～1023）</p>
<ul>
<li>FTP：21</li>
<li>TELNET：23</li>
<li>SMTP：25</li>
<li>DNS：53</li>
<li>HTTP：80</li>
<li>HTTPS：443</li>
<li>RDP：3389</li>
</ul>
</li>
<li><p>登记端口号（1024～49151）RDP：3389</p>
</li>
</ul>
<p>（2）客户端口（49152～65535）留给客户进程选择暂时使用</p>
<p>由此可见，两个计算机中的进程要互相通信，不仅必须知道对方的 IP 地址（为了找到对方的计算机），而且还要知道对方的端口号（为了找到对方计算机中的应用进程）</p>
<h2 id="二、用户数据报协议-UDP"><a href="#二、用户数据报协议-UDP" class="headerlink" title="二、用户数据报协议 UDP"></a>二、用户数据报协议 UDP</h2><h3 id="1、UDP-概述"><a href="#1、UDP-概述" class="headerlink" title="1、UDP 概述"></a>1、UDP 概述</h3><p>1）概念：UDP协议只在IP的数据报服务之上增加了复用、分发及差错检测的功能。UDP 传送的数据单位协议是 UDP 报文或用户数据报</p>
<p>2）UDP的主要特点</p>
<ul>
<li><p>是无连接的，即发送数据之前不需要建立连接</p>
</li>
<li><p>使用最大努力交付，即不保证可靠交付</p>
</li>
<li><p>是面向报文的【UDP对应用层交下来的报文，既不合并，也不拆分，而是保留这些报文的边界，即应用层交给UDP多长的报文，UDP就照样发送即一次发送一个报文。所以应用程序要选择合适大小的报文。传输层从IP层收到UDP数据报时，根据首部中的目的端口，把UDP数据报通过相应的端口，上交给应用进程。】</p>
</li>
<li><p>UDP没有拥塞控制，所以网络出现的拥塞不会使源主机的发送速率降低</p>
</li>
<li><p>支持一对一，一对一多，多对一，多对多的交互通信</p>
</li>
<li><p>首部开销小，只有8个字节</p>
</li>
</ul>
<h3 id="2、UDP-的首部格式"><a href="#2、UDP-的首部格式" class="headerlink" title="2、UDP 的首部格式"></a>2、UDP 的首部格式</h3><p>用户数据报 UDP 有两个字段：数据字段和首部字段。首部字段只有 8 个字节，由四个字段组成，每个字段两个字节。<br><img src="https://img-blog.csdn.net/20180714004956416?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1lpbl9Ib25nd2Vp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">​<br>伪首部：在计算检验和时，临时把“伪首部”和 UDP 用户数据报连接在一起。伪首部仅仅是为了计算检验和。<br><img src="https://img-blog.csdn.net/20180714005009595?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1lpbl9Ib25nd2Vp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">​</p>
<h2 id="三、传输控制协议-TCP"><a href="#三、传输控制协议-TCP" class="headerlink" title="三、传输控制协议 TCP"></a>三、传输控制协议 TCP</h2><p>TCP 传送的数据单位协议是 TCP 报文段(segment)。</p>
<h3 id="1、TCP-的特点"><a href="#1、TCP-的特点" class="headerlink" title="1、TCP 的特点"></a>1、TCP 的特点</h3><ul>
<li>TCP 是面向连接的运输层协议。</li>
<li>每一条 TCP 连接只能有两个端点 (endpoint)，每一条 TCP 连接只能是点对点的（一对一）。 </li>
<li>TCP 提供可靠交付的服务。</li>
<li>TCP 提供全双工通信。</li>
<li>面向字节流【流是指流入到进程或从进程流出的字节序列，虽然应用程序和 TCP 的交互是一次一个数据块，但 TCP 把应用程序交下来的数据看成仅仅是一连串无结构的字节流。TCP并不知道所传送字节流的含义。TCP不保证接收方应用程序所收到的数据块和发送方应用程序所发出的数据块大小一样，但接收方应用程序收到的字节流和发送方应用程序所发出的字节流完全一样】</li>
</ul>
<h3 id="2、TCP-的连接"><a href="#2、TCP-的连接" class="headerlink" title="2、TCP 的连接"></a>2、TCP 的连接</h3><p>1）概念：TCP 连接的端点不是主机，不是主机的IP 地址，不是应用进程，也不是运输层的协议端口。TCP 连接的端点叫做套接字 (socket) 或插口。 </p>
<p>2）套接字 (socket)：端口号拼接到 (contatenated with) IP 地址即构成了套接字。<br><img src="https://img-blog.csdn.net/20180714004858744?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1lpbl9Ib25nd2Vp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">​</p>
<p>3）注意：TCP连接的端点是个很抽象的套接字。同一个IP地址可以有多个不同的TCP连接，同一个端口号也可以有多个不同的TCP连接。</p>
<h3 id="3、TCP-报文段的首部格式"><a href="#3、TCP-报文段的首部格式" class="headerlink" title="3、TCP 报文段的首部格式"></a>3、TCP 报文段的首部格式</h3><p>1）概念</p>
<p>TCP 虽然是面向字节流的，但 TCP 传送的数据单元却是报文段。</p>
<p>一个 TCP 报文段分为首部和数据两部分，而 TCP 的全部功能都体现在它首部中各字段的作用。</p>
<p>TCP 报文段首部的前 20 个字节是固定的，后面有 4n 字节是根据需要而增加的选项 (n 是整数)。因此 TCP 首部的最小长度是 20 字节。</p>
<p>2）首部结构</p>
<p><img src="https://img-blog.csdn.net/20180714004834109?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1lpbl9Ib25nd2Vp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1）源端口和目的端口字段：各占 2 字节。端口是运输层与应用层的服务接口。运输层的复用和分用功能都要通过端口才能实现。 </span><br><span class="line">2）序号字段：占 4 字节。TCP 连接中传送的数据流中的每一个字节都编上一个序号。序号字段的值则指的是本报文段所发送的数据的第一个字节的序号。 </span><br><span class="line">3）确认号字段：占 4 字节，是期望收到对方的下一个报文段的数据的第一个字节的序号。 </span><br><span class="line">4）数据偏移（即首部长度）：占 4 位，它指出 TCP 报文段的数据起始处距离 TCP 报文段的起始处有多远。“数据偏移”的单位是 32 位字（以 4 字节为计算单位）。 </span><br><span class="line">5）保留字段——占 6 位，保留为今后使用，但目前应置为 0。 </span><br><span class="line">7）紧急 URG —— 当 URG  1 时，表明紧急指针字段有效。它告诉系统此报文段中有紧急数据，应尽快传送(相当于高优先级的数据)。 </span><br><span class="line">8）确认 ACK —— 只有当 ACK  1 时确认号字段才有效。当 ACK  0 时，确认号无效。 </span><br><span class="line">9）推送 PSH (PuSH) —— 接收 TCP 收到 PSH = 1 的报文段，就尽快地交付接收应用进程，而不再等到整个缓存都填满了后再向上交付。 </span><br><span class="line">10）复位 RST (ReSeT) —— 当 RST  1 时，表明 TCP 连接中出现严重差错（如由于主机崩溃或其他原因），必须释放连接，然后再重新建立运输连接。 </span><br><span class="line">11）同步 SYN —— 同步 SYN = 1 表示这是一个连接请求或连接接受报文。 </span><br><span class="line">12）终止 FIN (FINish) —— 用来释放一个连接。FIN  1 表明此报文段的发送端的数据已发送完毕，并要求释放运输连接。 </span><br><span class="line">13）窗口字段 —— 占 2 字节，用来让对方设置发送窗口的依据，单位为字节。</span><br><span class="line">14）检验和 —— 占 2 字节。检验和字段检验的范围包括首部和数据这两部分。在计算检验和时，要在 TCP 报文段的前面加上 12 字节的伪首部。</span><br><span class="line">15）紧急指针字段 —— 占 16 位，指出在本报文段中紧急数据共有多少个字节（紧急数据放在本报文段数据的最前面）。</span><br><span class="line">16）选项字段 —— 长度可变。TCP 最初只规定了一种选项，即最大报文段长度 MSS。MSS 告诉对方 TCP：“我的缓存所能接收的报文段的数据字段的最大长度是 MSS 个字节。” 最佳的 MSS 是很难确定的。</span><br><span class="line">17）填充字段 —— 这是为了使整个首部长度是 4 字节的整数倍。</span><br></pre></td></tr></table></figure>
<h3 id="4、TCP-可靠传输的实现"><a href="#4、TCP-可靠传输的实现" class="headerlink" title="4、TCP 可靠传输的实现"></a>4、TCP 可靠传输的实现</h3><p>1）超时重传：TCP 每发送一个报文段，就对这个报文段设置一次计时器，如果不能及时收到一个确认，将重发这个报文段。</p>
<p>2）检验和：利用TCP报文头的校验和检测数据在传输过程中是否变化。如果改变，就丢弃这个报文段让发送端重传。</p>
<p>3）排序：TCP发送方给每一个数据包进行编号，接收方对数据包进行排序，把有序数据传送给应用层。 且TCP的接收端会丢弃重复的数据包。</p>
<p>4）以字节为单位的滑动窗口技术：发送端发送一个数据包之后不需要等到对方应答后在发下一个数据包，只要发送的字节还没超过滑动窗口的大小就可以一直发送。在收到接收端的应答后滑动窗口开始移动。</p>
<p>5）流量控制：当接收端来不及处理发送端的数据，就减小自己的接收窗口，同时发送端也减小自己的发送窗口或者直接调成0，接收端处理完缓存里的数据在调整窗口开始接收数据包。</p>
<h3 id="5、TCP-的拥塞控制"><a href="#5、TCP-的拥塞控制" class="headerlink" title="5、TCP 的拥塞控制"></a>5、TCP 的拥塞控制</h3><p>1）概念</p>
<p>在某段时间，若对网络中某资源的需求超过了该资源所能提供的可用部分，网络的性能就要变坏。这种现象称为拥塞。</p>
<p>2）原理</p>
<p>拥塞控制就是防止过多的数据注入到网络中。只要网络没有出现拥塞，拥塞窗口就增大一些，以便把更多的数据包发送出去。只要网络出现拥塞，就必须把拥塞窗口减小一些，以减少注入到网络中的数据包，缓解网络出现拥塞。</p>
<blockquote>
<p>拥塞窗口只是一个状态变量，实际决定发送方能发送多少数据的是发送方窗口。</p>
</blockquote>
<p>3）流量控制与拥塞控制的区别</p>
<p>都是控制发送方的速率，但是流量控制是为了让接收方能来得及接收，拥塞控制是为了降低整个网络的拥塞程度。            </p>
<p>4）TCP 的拥塞控制方法</p>
<p>（1）慢开始和拥塞避免：拥塞窗口最开始是1，每经过一个传输轮次，拥塞窗口就加倍，到了慢开始门限就变成加1的关系。当发送丢包的时候，会计算一个新的慢开始门限，它是上一次慢开始门限的1/2。然后拥塞窗口又重1开始慢慢增长。</p>
<p>（2）快重传 / 快恢复：发生包丢后计算新的慢开始门限，然后拥塞窗口直接重新的慢开始门限开始线性增长。</p>
<p><img src="https://img-blog.csdn.net/20180714004543816?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1lpbl9Ib25nd2Vp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<h3 id="6、TCP-的传输连接管理"><a href="#6、TCP-的传输连接管理" class="headerlink" title="6、TCP 的传输连接管理"></a>6、TCP 的传输连接管理</h3><p><strong>1）TCP 的连接建立</strong></p>
<p>握手需要在客户和服务器之间交换三个 TCP 报文段。称之为三报文握手。采用三报文握手主要是为了防止已失效的连接请求报文段突然又传送到了，因而产生错误。<br><img src="https://img-blog.csdn.net/20180714004508354?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1lpbl9Ib25nd2Vp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">​</p>
<ul>
<li>建立连接之前要保证服务器处于监听状态，等待客户端的连接请求。</li>
<li>客户端选择一个随机的端口开始和服务器进行socket通信。客户端向服务器发送建立连接的请求报文段，首部的同步位SYN=1，初始序号seq=x，进入SYN-SENT（同步以发送状态）。等待服务器确认。</li>
<li>服务器收到该报文段后，向客户端发送确认，在确认报文段中SYN位和ACK位都置1，确认号ack=x+1，初始序号ack=y，此时服务器进入SYN_RECV状态</li>
<li>客户端收到服务器的确认后还要向服务器给一个确认，确认报文段的ACK是1，确认号ack=y+1，自己的序号seq=x+1，客户端进入ESTABLISHED（建立连接）状态，服务器收到客户端的确认后也进入建立连接状态。</li>
</ul>
<p>2）TCP 的连接释放：TCP 连接释放过程是四报文握手。<br><img src="https://img-blog.csdn.net/20180714004450434?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1lpbl9Ib25nd2Vp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">​</p>
<ul>
<li>客户端先发送一个连接释放的报文并停止发送数据。该报文段首部的终止控制位FIN=1，序号seq=u（客户端上次传送数据最后一个字节的序号加1）。并进入FIN-WAIT-1（终止等待1）状态。等待服务器的确认</li>
<li>服务器收到该报文段后就发出确认，该报文段的确认号ack=u+1， 序号seq=v（服务器上次发送数据最后一个字节的序号加1）。进入了CLOSE=WAIT（关闭等待）状态。</li>
<li>客户端收到服务器的确认后，就进入FIN-WAIT-2（终止等待2）状态，等待服务器发送连接释放报文。服务器向客户端发送连接释放的报文段，该报文段的终止控制位 FIN=1，重复上次的确认号ack = u + 1，序号 seq = w（半关闭状态服务器可能向客户端发送了一些数据）。进入了LAST-ACK（最后确认）状态，等待客户端的确认。</li>
<li>客户端收到连接释放报文段后，给服务器一个确认结束的报文段，该报文段确认号ack = w + 1，序号 seq = u + 1。此时客户端就进入TIME-WAIT（时间等待）状态，服务器进入CLOSED（关闭）。客户端经过2*MSL（最长报文段寿命）的时间后（4分钟）后也进入关闭</li>
</ul>
</div><div class="post-tag-list">标签: <a class="post-tags" href="/tags/网络安全/">网络安全</p>
      <div class="post-button"><a class="btn" href="/2021/05/20/%E8%BF%90%E8%BE%93%E5%B1%82/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>阅读更多</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2021/05/20/%E6%A6%82%E8%BF%B0/">概述</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2021-05-20 | <i class="fa fa-folder-o"></i> <a class="category-link" href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/">网络安全</a></span>
      <p><p>2）凡是将分布在不同地理位置上的具有独立工作能力的计算机、终端及其附属设备，用通信设备和通信线路连接起来，并配置网络软件和通信协议，以实现数据传输和资源共享的系统就叫做计算机网络。</p>
<p>3）Internet：译名有因特网和互联网，但是流行的是互联网。它是由数量极大的各种计算机网络互联起来的。互联网是世界上最大的计算机网络。</p>
<h3 id="2、计算机网络的功能"><a href="#2、计算机网络的功能" class="headerlink" title="2、计算机网络的功能"></a>2、计算机网络的功能</h3><p>连通性和资源共享</p>
<h2 id="二、互联网的标准化工作"><a href="#二、互联网的标准化工作" class="headerlink" title="二、互联网的标准化工作"></a>二、互联网的标准化工作</h2><h3 id="1、标准组织"><a href="#1、标准组织" class="headerlink" title="1、标准组织"></a>1、标准组织</h3><p>因特网协会【ISOC】：管理互联网 </p>
<p>=&gt; 互联网系结构委员会【IAB】 </p>
<p>=&gt; 互联网工程部【IETF】（针对协议的开发和标准化）、互联网研究部【IRTF】（针对互联网上的协议、应用、体系结构）</p>
<h3 id="2、标准制定"><a href="#2、标准制定" class="headerlink" title="2、标准制定"></a>2、标准制定</h3><p>互联网草案，建议标准（RFC），互联网标准（RFC） 。</p>
<h2 id="三、互联网的组成"><a href="#三、互联网的组成" class="headerlink" title="三、互联网的组成"></a>三、互联网的组成</h2><h3 id="1、边缘部分"><a href="#1、边缘部分" class="headerlink" title="1、边缘部分"></a>1、边缘部分</h3><p>1）概念</p>
<p>由所有连接在互联网上的主机组成，用来进行通信和资源共享。</p>
<p>2）端系统之间的通信方式</p>
<ul>
<li>客户—服务器方式（cs）</li>
<li>对等方式（p2p）：每个主机即是客户又是服务器。</li>
</ul>
<h3 id="2、核心部分"><a href="#2、核心部分" class="headerlink" title="2、核心部分"></a>2、核心部分</h3><p>1）概念</p>
<p>由大量网络设施和连接这些网络的路由器组成，用来提供服务。</p>
<p>2）电路交换</p>
<p>必须经历建立连接——通话——释放连接的交换方式。</p>
<p>过程：整个报文的比特流连续地从源点直达。</p>
<p>3）报文交换（已不使用）</p>
<p>过程：整个报文先传送到相邻结点，全部存储下来后查找转发表，转发到下一个结点。</p>
<p>3）分组交换</p>
<p>采用存储转发技术，把一个报文划分成几个分组进行传送。（不需要建立连接和释放连接）</p>
<p>过程：路由器收到一个分组，先暂时存储一下，检查其首部，查找转发表，按照首部中的目的地址，找到合适的接口转发出去，把分组交给下一个路由器。这样一步一步地以存储转发的方式，把分组交付最终的目的主机。</p>
<p><img src="https://imgkr.cn-bj.ufileos.com/d198c78d-bf51-4d7c-b21f-7ec067a66052.png" alt=""></p>
<h2 id="四、计算机网络的分类"><a href="#四、计算机网络的分类" class="headerlink" title="四、计算机网络的分类"></a>四、计算机网络的分类</h2><h3 id="1、按作用范围分类"><a href="#1、按作用范围分类" class="headerlink" title="1、按作用范围分类"></a>1、按作用范围分类</h3><p>1）广域网（WAN）：覆盖全球</p>
<p>2）城域网（LAN）：山西移动</p>
<p>3）局域网（LAN）：校园网</p>
<p>4）个人区域网（LAN）：家里的网</p>
<h3 id="2、按使用者分类"><a href="#2、按使用者分类" class="headerlink" title="2、按使用者分类"></a>2、按使用者分类</h3><p>1）公用网：所有人都能用的网</p>
<p>2）专用网：只能自己用，别人不能用</p>
<h3 id="3、接入网"><a href="#3、接入网" class="headerlink" title="3、接入网"></a>3、接入网</h3><p>是某用户端系统到互联网的第一个路由器之间的一种网络。</p>
<h2 id="五、计算机网络的性能"><a href="#五、计算机网络的性能" class="headerlink" title="五、计算机网络的性能"></a>五、计算机网络的性能</h2><h3 id="1、性能指标"><a href="#1、性能指标" class="headerlink" title="1、性能指标"></a>1、性能指标</h3><p>1）速率</p>
<p>主机在数据信道上传送数据的速率。</p>
<p>2）带宽</p>
<p>单位时间内从网络的某一点到另一点所能通过的最高数据率。</p>
<p>3）吞吐量</p>
<p>单位时间内通过某个网络的数据量。</p>
<p>4）时延</p>
<p>数据从网络的一个端传到另一个端所需要的时间。</p>
<p>时延=发送时延+传播时延+处理时延+排队时延</p>
<p>5）时延带宽积</p>
<p>时延带宽积=传播时延X带宽</p>
<p>6）往返时间</p>
<p>7）利用率</p>
<ul>
<li>信道利用率</li>
<li>网络利用率</li>
</ul>
<h3 id="2、非性能指标"><a href="#2、非性能指标" class="headerlink" title="2、非性能指标"></a>2、非性能指标</h3><p> 费用、质量、可靠性等。</p>
<h2 id="六、计算机网络的体系结构"><a href="#六、计算机网络的体系结构" class="headerlink" title="六、计算机网络的体系结构"></a>六、计算机网络的体系结构</h2><h3 id="1、协议"><a href="#1、协议" class="headerlink" title="1、协议"></a>1、协议</h3><p>1）概念：为进行网络中的数据交换而建立的规则、标准或约定。</p>
<p>2）协议三要素</p>
<ul>
<li>语法：数据与控制信息的结构或格式</li>
<li>语义：需要发出什么控制信息，完成什么动作作出什么响应</li>
<li>同步：事件实现顺序的详细说明</li>
</ul>
<h3 id="2、分类"><a href="#2、分类" class="headerlink" title="2、分类"></a>2、分类</h3><p>1）OSI 七层协议体系结构：理论完整，但是复杂不实用</p>
<p>2）TCP/IP 四层协议体系结构：得到了广泛应用</p>
<p>3）五层协议体系结构：学习的时候综合二者有点来学，边缘部分占有五层，核心部分只在第三层</p>
<table>
<thead>
<tr>
<th></th>
<th>任务</th>
<th>协议</th>
<th>数据单元</th>
</tr>
</thead>
<tbody>
<tr>
<td>应用层</td>
<td>用不同的协议分装不同的数据。</td>
<td>FTP，TFTP，HTTP，SMTP，DNS，TELNET</td>
<td>报文</td>
</tr>
<tr>
<td>传输层</td>
<td>向两台主机之间的进程进行通信提供通用的数据传输服务</td>
<td>TCP，UDP</td>
<td>报文</td>
</tr>
<tr>
<td>网络层</td>
<td>将报文分成等长的分组 。</td>
<td>IP，ICMP，IGMP，RIP</td>
<td>分组、包、数据报</td>
</tr>
<tr>
<td>数据链路层</td>
<td>高低电平和01信号的转换。</td>
<td>PPP，ARP，RARP</td>
<td>数据帧</td>
</tr>
<tr>
<td>物理层</td>
<td>传输数据</td>
<td>—</td>
<td>比特</td>
</tr>
</tbody>
</table>
</div><div class="post-tag-list">标签: <a class="post-tags" href="/tags/网络安全/">网络安全</p>
      <div class="post-button"><a class="btn" href="/2021/05/20/%E6%A6%82%E8%BF%B0/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>阅读更多</a></div>
    </div>
  </div>


<div id="pagination">
  <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"></a>
</div>

<footer>
  <div>
  Copyright &copy; 2022.<a href="/">牛牛和小栗</a><br>Powered by <a href="https://hexo.io" target="_blank">Hexo</a> | Theme <a href="https://lx.js.org" target="_blank">Lx</a><br>
  </div>
</footer>

  </div>
</div>
</div>

<button class="hamburger hamburger--arrow-r" type="button">
    <div class="hamburger-box">
      <div class="hamburger-inner"></div>
    </div>
</button> 
<div class="menu visibility">
  <div class="menu-head">
    <span class="layer">
      <div class="col">
        <div class="row for-pic">
          <div class="profile-pic">
            <a href="/"><img src="/images/avatar.jpg" alt="小犹太的牛牛"/></a>
          </div>
        </div>
        <div class="row for-name">
          <p>小犹太的牛牛</p>
          <span class="tagline">牛牛和栗子的主页</span>
        </div>
      </div>
    </span>
  </div>
  <nav class="menu-container">
  <ul class="menu-items">
    <li><a href="/"><i class="fa fa-home fa-fw"></i>首页</a></li>
    <li><a href="/archives/"><i class="fa fa-archive fa-fw"></i>归档</a></li>
    <li class="has-sub"><span class="dropdown-heading">
      <i class="fa fa-th-list fa-fw"></i>分类</span>
        <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Web%E5%89%8D%E7%AB%AF/">Web前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python%E7%88%AC%E8%99%AB/">python爬虫</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%88%B1%E6%83%85%E8%AE%B0%E5%BD%95/">爱情记录</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/">网络安全</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AF%E4%BB%B6/">软件</a></li></ul>
    </li>
    <li class="has-sub"><span class="dropdown-heading">
      <i class="fa fa-bookmark fa-fw"></i>页面</span>
        <ul>
          <li><a href="/guestbook/">Guestbook</a></li>
        <li><a href="/about/">About</a></li>
        </ul>
    </li>
    <li class="has-sub"><span class="dropdown-heading">
      <i class="fa fa-link fa-fw"></i>友链</span>
        <ul>
          <li> <a href="https://lx.js.org" target="_blank">Theme-Lx</a></li>
        </ul>
    </li>
  </ul>
  </nav>
</div>

<div class="gototop js-top">
  <a href="#" class="js-gotop"><i class="fa fa-arrow-up"></i></a>
</div>
<script src="//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/js/jquery.easing.min.js"></script>
<script>
(function () {
	"use strict";
	var goToTop = function() {
		$(".js-gotop").on("click", function(event){
			event.preventDefault();
			$("html, body").animate({
				scrollTop: $("html").offset().top
			}, 500, "easeInOutExpo");
			return false;
		});
		$(window).scroll(function(){
			var $win = $(window);
			if ($win.scrollTop() > 200) {
				$(".js-top").addClass("active");
			} else {
				$(".js-top").removeClass("active");
			}
		});
	};
	$(function(){
		goToTop();
	});
}());
</script>
<script src="//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/js/local.search.js"></script>

</body>
</html>
